<!DOCTYPE html><html lang="en">
<!-- Mirrored from bitcore.io/api/node-constructor by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Dec 2018 16:43:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Node Constructor | Bitcore</title><meta name="description" content="A collection of services that are loaded together."><!-- Twitter Card data--><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@BitPay"><meta name="twitter:title" content="Node Constructor"><meta name="twitter:description" content="A collection of services that are loaded together."><meta name="twitter:image" content="../images/social/card.jpg"><!-- Open Graph data (Facebook and Reddit)--><meta property="og:title" content="Node Constructor"><meta property="og:type" content="article"><meta property="og:url" content="../index.html"><meta property="og:image" content="../images/social/avatar.jpg"><meta property="og:description" content="A collection of services that are loaded together."><meta property="og:site_name" content="Bitcore.io"><!-- Add to homescreen for Chrome on Android--><meta name="mobile-web-app-capable" content="yes"><link rel="icon" sizes="192x192" href="../images/touch/chrome-touch-icon-192x192.b0c7306c.png"><!-- Add to homescreen for Safari on iOS--><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Bitcore"><link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.html"><!-- Tile icon for Win8 (144x144 + tile color)--><meta name="msapplication-TileImage" content="../images/touch/ms-touch-icon-144x144-precomposed.dcbb3eea.png"><meta name="msapplication-TileColor" content="#F9AB3D"><!-- Favicon--><link rel="shortcut icon" href="../favicon.ico"><link rel="stylesheet" href="../styles/main.88c254de.css" data-instant-track><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,300italic,400italic,600,700,700italic,600italic|Titillium+Web:400,300,700" rel="stylesheet" type="text/css"><script type="text/javascript" data-no-instant>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
  if(this.location.host === 'bitcore.io'){ analytics.load('hP7mqqPCPPa5hRatDaulKFxm0kPiB6Es'); }
  else { analytics.load("dgbXyNcmHR3bJIjumdYoe3GZFrs6sHBd"); }
  }}();
</script>
<script data-no-instant>
  var $buoop = {vs:{i:9,f:30,o:25,s:5.1},c:2};
  function $buo_f(){
   var e = document.createElement("script");
   e.src = "../../browser-update.org/update.js";
   document.body.appendChild(e);
  };
  try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
  catch(e){window.attachEvent("onload", $buo_f)}
</script>
<meta name="google-site-verification" content="GOfbzCpKO__Imdru-L0nG1Fo9tTvyH3QVAIWsYO9rCk"></head><body><nav class="navbar navbar-fixed-top dark-nav hidden-sm-down"><a href="../index.html" title="Home" class="logo logo-light margin-top"></a><ul class="nav navbar-nav pull-right"><li class="nav-item"><a href="../start.html" class="nav-link">Getting Started</a></li><li class="nav-item"><a href="../guides/index.html" class="nav-link">Guides</a></li><li class="nav-item"><a href="index.html" class="nav-link active">Docs</a></li><li class="nav-item"><a href="../playground/index.html" class="nav-link">Playground        </a></li><li class="nav-item"><a href="http://forum.bitcore.io/" class="nav-link">Forum</a></li></ul></nav><div class="mobile-menu hidden-md-up navbar-fixed-top"><div id="exCollapsingNavbar" class="collapse"><div class="bg-inverse p-md"><h3 class="m-b-0"> <ul class="p-l-0 no-bullets m-b-0"><li class="nav-item"><a href="../index.html" class="nav-link">Home</a></li><li class="nav-item"><a href="../start.html" class="nav-link">Getting Started</a></li><li class="nav-item"><a href="../guides/index.html" class="nav-link">Guides</a></li><li class="nav-item"><a href="index.html" class="nav-link active">Docs</a></li><li class="nav-item"><a href="../playground/index.html" class="nav-link">Playground        </a></li><li class="nav-item"><a href="http://forum.bitcore.io/" class="nav-link">Forum</a></li></ul></h3></div></div><nav class="navbar dark-nav"><button type="button" data-toggle="collapse" data-target="#exCollapsingNavbar" class="navbar-toggler p-l-0"><div class="logo logo-square-orange menu-text color-white">Menu</div></button></nav></div><div class="fixed-sidebar bg-gray border-right-grey p-l-md"><a href="index.html"><h3 class="menu-header m-t-md">Bitcore</h3><ul class="nav nav-pills nav-stacked"><li class="nav-item"><a href="index.html" class="nav-link">Overview</a></li></ul></a><h3 class="menu-header m-t-md">Node</h3><ul class="nav nav-pills nav-stacked"><li class="nav-item"><a href="node.html" class="nav-link">Get Started</a></li><li class="nav-item"><a href="node-constructor.html" class="active nav-link">Node Constructor</a></li><li class="nav-item"><a href="bus.html" class="nav-link">Event Bus</a></li><li class="nav-item"><a href="development.html" class="nav-link">Development</a></li><li class="nav-item"><a href="upgrade.html" class="nav-link">Upgrade</a></li></ul><a href="service/index.html"><h3 class="menu-header m-t-md">Services</h3></a><a href="lib/index.html"><h3 class="menu-header m-t-md">Library API</h3></a><a href="mnemonic/index.html"><h3 class="menu-header m-t-md">Library Modules</h3></a><a href="p2p/index.html"><h3 class="menu-header m-t-md">Peer-to-Peer</h3></a></div><div class="scroll-content"><div class="api-content"><div class="docs bg-white"><div class="container"><div class="section p-t-lg"><div class="text-right bring-to-front"><a href="https://github.com/bitpay/bitcore-node/edit/master/docs/node.md">Edit</a></div><h1 id="node">Node</h1>
<p>A node represents a collection of services that are loaded together. For more information about services, please see the <a href=service/index.html>Services Documentation</a>.</p>
<h2 id="api-documentation">API Documentation</h2>
<ul>
<li><code>start()</code> - Will start the node&#39;s services in the correct order based on the dependencies of a service.</li>
<li><code>stop()</code> - Will stop the node&#39;s services.</li>
<li><code>openBus()</code> - Will create a new event bus to subscribe to events.</li>
<li><code>getAllAPIMethods()</code> - Returns information about all of the API methods from the services.</li>
<li><code>getAllPublishEvents()</code> - Returns information about publish events.</li>
<li><code>getServiceOrder()</code> - Returns an array of service modules.</li>
<li><code>services.&lt;service-name&gt;.&lt;method&gt;</code> - Additional API methods exposed by each service. The services for the node are defined when the node instance is constructed.</li>
</ul>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-js">
var index = require(&#39;bitcore-node&#39;);
var Bitcoin = index.services.Bitcoin;
var Node = index.Node;

var configuration = {
  datadir: &#39;/home/user/.bitcoin&#39;,
  network: &#39;testnet&#39;,
  services: [
    {
      name: &#39;bitcoind&#39;,
      module: Bitcoin,
      config: {}
    }
  ]
};

var node = new Node(configuration);

node.start(function() {
  //start the node so the node.on(&#39;ready&#39;) is actually called. 
});

node.on(&#39;ready&#39;, function() {
  console.log(&#39;Bitcoin Node Ready&#39;);
});

node.on(&#39;error&#39;, function(err) {
  console.error(err);
});

// shutdown the node
node.stop(function() {
  // the shutdown is complete
});
</code></pre>
</div></div></div><div class="lib bg-dark"><div class="container"><div class="section p-t-lg"><div class="text-right bring-to-front"><a href="../../github.com/bitpay/bitcore-node/blob/master/lib/node.html">View Source</a></div><p><a name="Node"></a></p>
<h2 id="node-config-">Node(config)</h2>
<p>A node is a hub of services, and will manage starting and stopping the services in
the correct order based the the dependency chain. The node also holds common configuration
properties that can be shared across services, such as network settings.</p>
<p>The array of services should have the format:</p>
<pre><code class="lang-js">{
  name: &#39;bitcoind&#39;,
  config: {}, // options to pass into constructor
  module: ServiceConstructor
}
</code></pre>
<p><strong>Kind</strong>: global function  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>config</td>
<td><code>Object</code></td>
<td>The configuration of the node</td>
</tr>
<tr>
<td>config.formatLogs</td>
<td><code>Array</code></td>
<td>Option to disable formatting of logs</td>
</tr>
<tr>
<td>config.services</td>
<td><code>Array</code></td>
<td>The array of services</td>
</tr>
<tr>
<td>config.port</td>
<td><code>Number</code></td>
<td>The HTTP port for services</td>
</tr>
<tr>
<td>config.https</td>
<td><code>Boolean</code></td>
<td>Enable https</td>
</tr>
<tr>
<td>config.httpsOptions</td>
<td><code>Object</code></td>
<td>Options for https</td>
</tr>
<tr>
<td>config.httpsOptions.key</td>
<td><code>String</code></td>
<td>Path to key file</td>
</tr>
<tr>
<td>config.httpsOptions.cert</td>
<td><code>String</code></td>
<td>Path to cert file</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#Node">Node(config)</a><ul>
<li><a href="#Node+_setNetwork">._setNetwork(config)</a></li>
<li><a href="#Node+openBus">.openBus()</a> ⇒ <code>Bus</code></li>
<li><a href="#Node+getAllAPIMethods">.getAllAPIMethods()</a> ⇒ <code>Array</code></li>
<li><a href="#Node+getAllPublishEvents">.getAllPublishEvents()</a> ⇒ <code>Array</code></li>
<li><a href="#Node+getServiceOrder">.getServiceOrder()</a> ⇒ <code>Array</code></li>
<li><a href="#Node+start">.start(callback)</a></li>
<li><a href="#Node+stop">.stop(callback)</a></li>
</ul>
</li>
</ul>
<p><a name="Node+_setNetwork"></a></p>
<h3 id="node-_setnetwork-config-">node._setNetwork(config)</h3>
<p>Will set the this.network based on a network string.</p>
<p><strong>Kind</strong>: instance method of <code><a href="#Node">Node</a></code>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>config</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>config.network</td>
<td><code>String</code></td>
<td>Possible options &quot;testnet&quot;, &quot;regtest&quot; or &quot;livenet&quot;</td>
</tr>
</tbody>
</table>
<p><a name="Node+openBus"></a></p>
<h3 id="node-openbus-code-bus-code-">node.openBus() ⇒ <code>Bus</code></h3>
<p>Will instantiate a new Bus for this node.</p>
<p><strong>Kind</strong>: instance method of <code><a href="#Node">Node</a></code><br><a name="Node+getAllAPIMethods"></a></p>
<h3 id="node-getallapimethods-code-array-code-">node.getAllAPIMethods() ⇒ <code>Array</code></h3>
<p>Will get an array of API method descriptions from all of the available services.</p>
<p><strong>Kind</strong>: instance method of <code><a href="#Node">Node</a></code><br><a name="Node+getAllPublishEvents"></a></p>
<h3 id="node-getallpublishevents-code-array-code-">node.getAllPublishEvents() ⇒ <code>Array</code></h3>
<p>Will get an array of events from all of the available services.</p>
<p><strong>Kind</strong>: instance method of <code><a href="#Node">Node</a></code><br><a name="Node+getServiceOrder"></a></p>
<h3 id="node-getserviceorder-code-array-code-">node.getServiceOrder() ⇒ <code>Array</code></h3>
<p>Will organize services into the order that they should be started
based on the service&#39;s dependencies.</p>
<p><strong>Kind</strong>: instance method of <code><a href="#Node">Node</a></code><br><a name="Node+start"></a></p>
<h3 id="node-start-callback-">node.start(callback)</h3>
<p>Will start all running services in the order based on the dependency chain.</p>
<p><strong>Kind</strong>: instance method of <code><a href="#Node">Node</a></code>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>callback</td>
<td><code>function</code></td>
<td>Called when all services are started</td>
</tr>
</tbody>
</table>
<p><a name="Node+stop"></a></p>
<h3 id="node-stop-callback-">node.stop(callback)</h3>
<p>Will stop all running services in the reverse order that they
were initially started.</p>
<p><strong>Kind</strong>: instance method of <code><a href="#Node">Node</a></code>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>callback</td>
<td><code>function</code></td>
<td>Called when all services are stopped</td>
</tr>
</tbody>
</table>
</div></div></div></div></div><a class="exit-off-canvas"></a><script src="../scripts/main.min.efe3021b.js" data-no-instant="data-no-instant"></script></body>
<!-- Mirrored from bitcore.io/api/node-constructor by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Dec 2018 16:43:05 GMT -->
</html>